\doxysection{devices/rtc.c File Reference}
\hypertarget{rtc_8c}{}\label{rtc_8c}\index{devices/rtc.c@{devices/rtc.c}}
{\ttfamily \#include \"{}rtc.\+h\"{}}\newline
Include dependency graph for rtc.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=296pt]{rtc_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int() \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\+\_\+read\+\_\+data}} (uint8\+\_\+t addr, uint8\+\_\+t \texorpdfstring{$\ast$}{*}data)
\begin{DoxyCompactList}\small\item\em Read from the RTC data register on addr. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{rtc_8c_a793e4961c088e1842f29b37af4e37b5c}{rtc\+\_\+write\+\_\+data}} (uint8\+\_\+t addr, uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Write data to the RTC address register. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_time}{Time}}() \mbox{\hyperlink{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793}{rtc\+\_\+read\+\_\+time}} ()
\begin{DoxyCompactList}\small\item\em Yields a \doxylink{struct_time}{Time} like type struct that contains the time taken from the RTC. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{rtc_8c_a13a4e87785409aac48125001245f0f16}\label{rtc_8c_a13a4e87785409aac48125001245f0f16} 
\index{rtc.c@{rtc.c}!rtc\_read\_data@{rtc\_read\_data}}
\index{rtc\_read\_data@{rtc\_read\_data}!rtc.c@{rtc.c}}
\doxysubsubsection{\texorpdfstring{rtc\_read\_data()}{rtc\_read\_data()}}
{\footnotesize\ttfamily int() rtc\+\_\+read\+\_\+data (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{addr,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data }\end{DoxyParamCaption})}



Read from the RTC data register on addr. 


\begin{DoxyParams}{Parameters}
{\em addr} & Adress of register to read from \\
\hline
{\em data} & The data to be read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, 1 otherwise 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{rtc_8c_source_l00003}{3}} of file \mbox{\hyperlink{rtc_8c_source}{rtc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00004\ \ \ \textcolor{keywordflow}{if}\ (sys\_outb(\mbox{\hyperlink{rtc__defines_8h_a710b98232df2c563009e6f8a6cd18220}{RTC\_ADDR\_REG}},addr)\ !=\ OK)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00005\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{utils_8c_a79a031a8611f5b2d6afa4158e92b0fb4}{util\_sys\_inb}}(\mbox{\hyperlink{rtc__defines_8h_a2f258a00c59c3f347c8d2d4a75471ce0}{RTC\_DATA\_REG}},\ data);}
\DoxyCodeLine{00006\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=259pt]{rtc_8c_a13a4e87785409aac48125001245f0f16_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{rtc_8c_a13a4e87785409aac48125001245f0f16_icgraph}
\end{center}
\end{figure}
\Hypertarget{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793}\label{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793} 
\index{rtc.c@{rtc.c}!rtc\_read\_time@{rtc\_read\_time}}
\index{rtc\_read\_time@{rtc\_read\_time}!rtc.c@{rtc.c}}
\doxysubsubsection{\texorpdfstring{rtc\_read\_time()}{rtc\_read\_time()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_time}{Time}}() rtc\+\_\+read\+\_\+time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Yields a \doxylink{struct_time}{Time} like type struct that contains the time taken from the RTC. 

\begin{DoxyReturn}{Returns}
\doxylink{struct_time}{Time} struct with day, month, year, hour, minutes and seconds 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{rtc_8c_source_l00013}{13}} of file \mbox{\hyperlink{rtc_8c_source}{rtc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ uint8\_t\ reg;}
\DoxyCodeLine{00016\ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(\mbox{\hyperlink{rtc__defines_8h_a03954a63ead3f02b7790ce79e9877eea}{RTC\_REG\_B}},\&reg);}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ reg\ |=\ \mbox{\hyperlink{rtc__defines_8h_afe5d31647d8882e7fa9ea7030baa2780}{RTC\_DM}};}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \mbox{\hyperlink{rtc_8c_a793e4961c088e1842f29b37af4e37b5c}{rtc\_write\_data}}(\mbox{\hyperlink{rtc__defines_8h_a03954a63ead3f02b7790ce79e9877eea}{RTC\_REG\_B}},reg);}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ uint8\_t\ components[6]\ =\ \{0,\ 0,\ 0\ ,\ 0\ ,\ 0,\ 0\};}
\DoxyCodeLine{00023\ \ \ uint8\_t\ registers[6]\ =\ \{\mbox{\hyperlink{rtc__defines_8h_a8bc2a4a5d4ba7287830a39528fd454d6}{RTC\_MONTH\_DAY}},\ \mbox{\hyperlink{rtc__defines_8h_abda0c877ee1a02b8351c0cfe72838088}{RTC\_MONTH}},\ \mbox{\hyperlink{rtc__defines_8h_a1df5568e6774b73aa4c6e59fc40e9147}{RTC\_YEAR}}\ ,\ \mbox{\hyperlink{rtc__defines_8h_a4d74cdb9a956c4f1783ad5aff00dc2b8}{RTC\_HOURS}},\ \mbox{\hyperlink{rtc__defines_8h_a1bad17ef559ad960bba47fe87643b4c7}{RTC\_MINS}},\ \mbox{\hyperlink{rtc__defines_8h_aa86f159915dace411e5a7b74ecc130bd}{RTC\_SECS}}\};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 6;\ i++)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(\mbox{\hyperlink{rtc__defines_8h_ae5ffad506b363f28bed1bb5e5926bd2d}{RTC\_REG\_A}},\&reg);}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{while}\ (reg\ \&\ \mbox{\hyperlink{rtc__defines_8h_a2ebe3d816d8b2e9f1be075554e4135b3}{RTC\_UIP}})\{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(\mbox{\hyperlink{rtc__defines_8h_ae5ffad506b363f28bed1bb5e5926bd2d}{RTC\_REG\_A}},\&reg);}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(registers[i],\&components[i]);}
\DoxyCodeLine{00031\ \ \ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \mbox{\hyperlink{struct_time}{Time}}\ date\ =\ \{components[0],\ components[1],\ components[2],\ components[3],components[4],components[5]\};}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordflow}{return}\ date;}
\DoxyCodeLine{00035\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793_icgraph}
\end{center}
\end{figure}
\Hypertarget{rtc_8c_a793e4961c088e1842f29b37af4e37b5c}\label{rtc_8c_a793e4961c088e1842f29b37af4e37b5c} 
\index{rtc.c@{rtc.c}!rtc\_write\_data@{rtc\_write\_data}}
\index{rtc\_write\_data@{rtc\_write\_data}!rtc.c@{rtc.c}}
\doxysubsubsection{\texorpdfstring{rtc\_write\_data()}{rtc\_write\_data()}}
{\footnotesize\ttfamily int() rtc\+\_\+write\+\_\+data (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{addr,  }\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Write data to the RTC address register. 


\begin{DoxyParams}{Parameters}
{\em addr} & Adress of register to write on \\
\hline
{\em data} & The data to be written \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, 1 otherwise 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{rtc_8c_source_l00008}{8}} of file \mbox{\hyperlink{rtc_8c_source}{rtc.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00009\ \ \ \textcolor{keywordflow}{if}\ (sys\_outb(\mbox{\hyperlink{rtc__defines_8h_a710b98232df2c563009e6f8a6cd18220}{RTC\_ADDR\_REG}},addr)\ !=\ OK)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00010\ \ \ \textcolor{keywordflow}{return}\ sys\_outb(\mbox{\hyperlink{rtc__defines_8h_a2f258a00c59c3f347c8d2d4a75471ce0}{RTC\_DATA\_REG}},\ data);}
\DoxyCodeLine{00011\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{rtc_8c_a793e4961c088e1842f29b37af4e37b5c_icgraph}
\end{center}
\end{figure}
