\doxysection{rtc.\+c}
\hypertarget{rtc_8c_source}{}\label{rtc_8c_source}\index{devices/rtc.c@{devices/rtc.c}}
\mbox{\hyperlink{rtc_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{rtc_8h}{rtc.h}}"{}}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00003}\mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{00003}}\ int(\mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}})(uint8\_t\ addr,\ uint8\_t\ *data)\ \{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00004}00004\ \ \ \textcolor{keywordflow}{if}\ (sys\_outb(\mbox{\hyperlink{rtc__defines_8h_a710b98232df2c563009e6f8a6cd18220}{RTC\_ADDR\_REG}},addr)\ !=\ OK)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00005}00005\ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{utils_8c_a79a031a8611f5b2d6afa4158e92b0fb4}{util\_sys\_inb}}(\mbox{\hyperlink{rtc__defines_8h_a2f258a00c59c3f347c8d2d4a75471ce0}{RTC\_DATA\_REG}},\ data);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00006}00006\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00008}\mbox{\hyperlink{rtc_8c_a793e4961c088e1842f29b37af4e37b5c}{00008}}\ int(\mbox{\hyperlink{rtc_8c_a793e4961c088e1842f29b37af4e37b5c}{rtc\_write\_data}})(uint8\_t\ addr\ ,\ uint8\_t\ data)\ \{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00009}00009\ \ \ \textcolor{keywordflow}{if}\ (sys\_outb(\mbox{\hyperlink{rtc__defines_8h_a710b98232df2c563009e6f8a6cd18220}{RTC\_ADDR\_REG}},addr)\ !=\ OK)\ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00010}00010\ \ \ \textcolor{keywordflow}{return}\ sys\_outb(\mbox{\hyperlink{rtc__defines_8h_a2f258a00c59c3f347c8d2d4a75471ce0}{RTC\_DATA\_REG}},\ data);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00011}00011\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00013}\mbox{\hyperlink{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793}{00013}}\ \mbox{\hyperlink{struct_time}{Time}}\ (\mbox{\hyperlink{rtc_8c_a9cfbfcb4b0b62e6acd00fb33c9b6b793}{rtc\_read\_time}})\ ()\ \{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00015}00015\ \ \ uint8\_t\ reg;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00016}00016\ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(\mbox{\hyperlink{rtc__defines_8h_a03954a63ead3f02b7790ce79e9877eea}{RTC\_REG\_B}},\&reg);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00018}00018\ \ \ reg\ |=\ \mbox{\hyperlink{rtc__defines_8h_afe5d31647d8882e7fa9ea7030baa2780}{RTC\_DM}};}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00020}00020\ \ \ \mbox{\hyperlink{rtc_8c_a793e4961c088e1842f29b37af4e37b5c}{rtc\_write\_data}}(\mbox{\hyperlink{rtc__defines_8h_a03954a63ead3f02b7790ce79e9877eea}{RTC\_REG\_B}},reg);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00022}00022\ \ \ uint8\_t\ components[6]\ =\ \{0,\ 0,\ 0\ ,\ 0\ ,\ 0,\ 0\};}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00023}00023\ \ \ uint8\_t\ registers[6]\ =\ \{\mbox{\hyperlink{rtc__defines_8h_a8bc2a4a5d4ba7287830a39528fd454d6}{RTC\_MONTH\_DAY}},\ \mbox{\hyperlink{rtc__defines_8h_abda0c877ee1a02b8351c0cfe72838088}{RTC\_MONTH}},\ \mbox{\hyperlink{rtc__defines_8h_a1df5568e6774b73aa4c6e59fc40e9147}{RTC\_YEAR}}\ ,\ \mbox{\hyperlink{rtc__defines_8h_a4d74cdb9a956c4f1783ad5aff00dc2b8}{RTC\_HOURS}},\ \mbox{\hyperlink{rtc__defines_8h_a1bad17ef559ad960bba47fe87643b4c7}{RTC\_MINS}},\ \mbox{\hyperlink{rtc__defines_8h_aa86f159915dace411e5a7b74ecc130bd}{RTC\_SECS}}\};}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00025}00025\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 6;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00026}00026\ \ \ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(\mbox{\hyperlink{rtc__defines_8h_ae5ffad506b363f28bed1bb5e5926bd2d}{RTC\_REG\_A}},\&reg);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00027}00027\ \ \ \ \ \textcolor{keywordflow}{while}\ (reg\ \&\ \mbox{\hyperlink{rtc__defines_8h_a2ebe3d816d8b2e9f1be075554e4135b3}{RTC\_UIP}})\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00028}00028\ \ \ \ \ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(\mbox{\hyperlink{rtc__defines_8h_ae5ffad506b363f28bed1bb5e5926bd2d}{RTC\_REG\_A}},\&reg);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00029}00029\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00030}00030\ \ \ \ \ \mbox{\hyperlink{rtc_8c_a13a4e87785409aac48125001245f0f16}{rtc\_read\_data}}(registers[i],\&components[i]);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00031}00031\ \ \ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00033}00033\ \ \ \mbox{\hyperlink{struct_time}{Time}}\ date\ =\ \{components[0],\ components[1],\ components[2],\ components[3],components[4],components[5]\};}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00034}00034\ \ \ \textcolor{keywordflow}{return}\ date;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00035}00035\ \}}

\end{DoxyCode}
